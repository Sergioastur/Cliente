<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        /*
            Realiza un programa para que dos personas puedan jugar al Master Mind.
            Primeramente, el ordenador pedirá una combinación secreta que consistirá en 4 números y que
            tecleará una de las personas. Después, la otra persona deberá adivinar dicha combinación secreta
            para lo que dispondrá como máximo de 8 intentos. Cada intento consistirá en escribir 4 números,
            tras lo cual el ordenador escribirá el número de muertos y de heridos.
                1. Un número está muerto si coincide en valor y en posición con la combinación secreta.
                2. Un número está herido si coincide en valor, pero no en posición con la combinación secreta.
                Por ejemplo: si la combinación secreta es (5 3 1 2), en el intento (5 1 4 4) hay 1 muerto (el 5) y un
                herido (el 1). Según esta definición en el intento (5 1 1 2) habría 3 muertos (el 5, el segundo 1 y el 2)
                y 1 herido (el primer 1).
            El programa terminará por una de las dos siguientes situaciones: a) el jugador ha acertado la
            combinación escrita por el otro o b) se ha llegado a 8 intentos sin acertarla.
        */

        let numSecreto = prompt("Combinación secreta (4 digitos): ");
        let digitosNum = numSecreto.split('').map(Number);
        

        for (let i=0; i<8; i++) {
            let intento = prompt("Intento "+(i+1)+": ");
            let digitosInt = intento.split('').map(Number);
            let heridos = 0;
            let muertos = 0;
            let digitosMarcados = [false, false, false, false];
            let probados = [false, false, false, false];
            

            for (let j=0; j<4; j++) {
                if (digitosNum[j] == digitosInt[j]) {
                    muertos++;
                    digitosMarcados[j] = true;
                    probados[j] = true;
                }
            }

            /*
            for (let x = 0; x < 4; x++) {
                if (!probados[x]) {
                    for (let z = 0; z < 4; z++) {
                        if (!digitosMarcados[z] && digitosInt[x] == digitosNum[z]) {
                            heridos++;
                            digitosMarcados[z] = true;
                            //break;
                        }
                    }
                }
            }
            */

            for (let j = 0; j < digitosNum.length; j++) {
                for (let x = 0; x < digitosInt.length; x++) {
                
                    if (digitosNum[j] === digitosInt[x] && j !== x) {
                        heridos++;
                        break; 
                    }
                }
            }
            if (muertos == 4) {
                document.write("HAS GANADO");
                break;
            } else {
                window.alert("Ha habido "+muertos+" muertos y "+heridos+" heridos.");
            }

        }
    </script>
</body>
</html>